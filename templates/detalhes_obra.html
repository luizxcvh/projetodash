{% extends "base.html" %}

{% block title %}Detalhes da Obra{% endblock %}
{% block header_title %}{{ obra.nome }}{% endblock %}
{% block header_subtitle %}Painel de gestão e acompanhamento financeiro da obra.{% endblock %}

{% block content %}
<div class="details-grid">
    <div class="content-container">
        </div>

    <div class="content-container">
        <div class="content-header">
            <h1>Gestão Financeira</h1>
        </div>

        <div class="finance-summary">
            <p><strong>Orçamento Previsto:</strong> <span>{{ obra.orcamento_previsto | currency }}</span></p>
            <p><strong>Total Gasto:</strong> <span class="text-gasto">{{ obra.total_gasto | currency }}</span></p>
            <p><strong>Saldo Restante:</strong> <span class="text-disponivel">{{ (obra.orcamento_previsto - obra.total_gasto) | currency }}</span></p>
        </div>

        <hr style="margin: 2rem 0;">

        <hr style="margin: 2rem 0;">

        <h4>Histórico de Gastos</h4>
        <div class="gastos-list">
            {% for gasto in gastos %}
            <div class="gasto-item">
                <div class="gasto-info">
                    <span class="gasto-data">{{ gasto.data.strftime('%d/%m/%Y') }}</span>
                    <span class="gasto-desc">{{ gasto.descricao }}</span>
                </div>
                <span class="gasto-valor">{{ gasto.valor | currency }}</span>
            </div>
            {% else %}
            <p>Nenhum gasto registado para esta obra.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}